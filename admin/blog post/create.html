<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Brand</title>
    <link rel="stylesheet" href="../admin css/admin.css">
    <script src="https://kit.fontawesome.com/3ac835aa79.js" crossorigin="anonymous"></script>
</head>

<body>
    <div id="header">
        <div class="homepage__container">
           <nav>
            
            <img src="/pics used/beno logo 2.png" class="logo">
            <button style="color: whitesmoke; cursor: pointer; border: none; "><a href="/index.html">Home</a></button>
          </nav>
    
         </div>
    
    </div>
    <div class="mainaboutme">
            
                <div class="about-col-1">
                 <ul>
                    <li><a href="blog.html">Manage Blog</a></li>
                    <li><a href="../users/index.html">Manage Users</a></li>
                    <li><a href="../contact/index.html">Manage Contact</a></li>
                 </ul>
                </div>

                <div class="about-col-2">
                    <div class="button-group">
                        <button><a href="create.html"class="btnblog">Add blog</a></button>
                        <button><a href="blog.html"class="btnblog">Manage blog</a></button>
                    </div>

                    <div class="content">
                        <h2 class="page-title">Add New Blog</h2>
                        
                      <form  id="new-post-form">
                        <div>
                          <p>Title</p>
                          <input type="text" name="title" id="blogtitle" class="text-input"> 
                        </div>
                        <div>
                            <p>Body</p>
                            <textarea name="body" id="blogbody" class="body-input"></textarea>
                        </div>
                        <div>
                            <p>Image</p>
                            <input type="file" name="image" id="blogimage" class="text-input">
                        </div>
                        <div>
                            <button type="submit"  class="btnblog">Create Post</button>
                        </div>
                      </form>
                            
                    </div>
                    
                </div>                
   </div>
  
   
<script>

const submit = document.querySelector('.btnblog')
const blogtitle = document.querySelector('#blogtitle')
const blogbody = document.querySelector('#blogbody')
const blogimage = document.querySelector('#blogimage')

console.log(blogtitle, blogbody, blogimage);


submit.addEventListener('click', (e) => {
    e.preventDefault()

    const blogData = {
        title: blogtitle.value,
        blogBody: blogbody.value,
        blogimage: blogimage.value

    }
    console.log(blogData)

    const newData = {
        method: 'POST',

        headers: {
            'Content-Type': "application/json"

            // "authorization": `Bearer ${token}`
        },
        body: JSON.stringify(blogData)
    }

    console.log(newData)
    fetch("https://marthairadukunda.cyclic.app/api/blogs", newData)
        .then(async(n) => {
            const res = await n.json()
            console.log(res)
            if (res.status == 'success') {
                alert('Blog created');
                location.reload();
            } else {
                alert('Blog not created!')
            }

        })
})

</script>
</body>
</html>