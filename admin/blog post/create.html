<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Brand</title>
    <link rel="stylesheet" href="../admin css/admin.css">
    <script src="https://kit.fontawesome.com/3ac835aa79.js" crossorigin="anonymous"></script>
    <script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
    <script>tinymce.init({selector:'textarea'});</script>
</head>

<body>
    <div id="header">
        <div class="homepage__container">
           <nav>
            
            <img src="/pics used/beno logo 2.png" class="logo">
            <ul id="sidemenu">
                <li><a href="/index.html" >Home </a></li>
               </ul>
          </nav>
    
         </div>
    
    </div>
    <div class="mainaboutme">
            
                <div class="about-col-1">
                 <ul>
                    <li><a href="blog.html">Manage Blog</a></li>
                    <li><a href="../users/index.html">Manage Users</a></li>
                    <li><a href="../contact/index.html">Manage Contact</a></li>
                 </ul>
                </div>

                <div class="about-col-2">
                    <div class="button-group">
                        <button type="button"><a href="create.html"class="btnblog">Add blog</a></button>
                        <button type="button"><a href="blog.html"class="btnblog">Manage blog</a></button>
                    </div>

                    <div class="content">
                        <h2 class="page-title">Add New Blog</h2>
                        
                      <form id="post-form">
                        <div>
                          <p>Title</p>
                          <input type="text" name="title" id="title" class="text-input"> 
                        </div>
                        <div style="padding-left: 30px;">
                            <p>Body</p>
                            <textarea name="content" id="content" class="body-input"></textarea>
                        </div>
                        <div>
                            <p>Image</p>
                            <input type="file" name="image" id="image" class="text-input">
                        </div>
                        <div>
                            <button type="submit" id="submit" class="btnblog">Create Post</button>
                        </div>
                      </form>
                            
                    </div>
                    
                </div>    
    </div>  

<script>

// document.addEventListener("DOMContentLoaded", function() {
//     var form = document.getElementById("post-form");
//     form.addEventListener("submit", function(e) {
//         e.preventDefault();
//         var title = document.getElementById("title").value;
//         var content = document.getElementById("content").value;
//         var image = document.getElementById("image").value;

//         var xhr = new XMLHttpRequest();
//         xhr.open("POST", "https://beno-backend.onrender.com/api/blogs/blog");
//         xhr.setRequestHeader("Content-Type", "application/json");
//         xhr.onload = function() {
//             if (xhr.status === 201) {
//                 alert("Post created successfully!");
//             } else {
//                 alert("An error occurred while the post being created.");
//             }
//         };
//         xhr.onerror = function() {
//             alert("An error occurred while creating the post.");
//         };
//         xhr.send(JSON.stringify({
//             title: title,
//             content: content,
//             image: image
//         }));
//     });
// });

const submit = document.querySelector('#submit')
const title = document.querySelector('#title')
const content = document.querySelector('#content')
const image = document.querySelector('#image')


submit.addEventListener('click', (e) => {
    e.preventDefault()

    const blogData = {
        title: title.value,
        content: content.value,
        image: image.value
    }

    console.log(blogData)

    const newData = {
        method: 'POST',

        headers: {
            'Content-Type': "application/json"

            // "authorization": `Bearer ${token}`
        },
        body: JSON.stringify(blogData)
    }

    console.log(newData)
    fetch("https://beno-backend.onrender.com/api/blogs/blog", newData)
    .then(async(n) => {
            const res = await n.json()
            console.log(res)
            if (res){
                alert('Blog created');
                location.reload();
            } else {
                alert('Blog not created!')
            }

        })
        .catch((error) => {
       console.error("Error fetching blog:", error);
  });
})




</script>
</body>
</html>